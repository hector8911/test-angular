<app-navbar></app-navbar>
<br/>
<div class="main-div">
  <mat-card class="example-card">
    <mat-card-header class="card-header">
        <mat-card-title>
            <h1>Reporte Viajes</h1>
        </mat-card-title>
    </mat-card-header>
    <mat-card-content class="card-content">
      <form [formGroup]="Form" (ngSubmit)="actualizar()" ngNativeValidate>
        <div formGroupName="params">
          <mat-card>
            <mat-card-content class="card-content">
              <table class="table1">
                <tr>
                  <td>
                    <mat-form-field class="form-field" color="accent" appearance="fill">
                      <mat-label>Fecha Inicial</mat-label>
                      <input formControlName="fechai" matInput [matDatepicker]="picker1" required>
                      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                      <mat-datepicker #picker1></mat-datepicker>
                  </mat-form-field>
                  </td>
                  <td>
                    <mat-form-field class="form-field" color="accent" appearance="fill">
                      <mat-label>Fecha Final</mat-label>
                      <input formControlName="fechaf" matInput [matDatepicker]="picker2" required>
                      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                      <mat-datepicker #picker2></mat-datepicker>
                  </mat-form-field>
                  </td>
                  <td >
                    <mat-form-field class="form-field" color="accent" appearance="fill">
                      <mat-label>Seleccione un transportista</mat-label>
                      <mat-select formControlName="idTransportista" required>
                        <mat-option *ngFor="let transportista of transportistas" [value]="transportista.id"> {{ transportista.nombreColaborador }}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                  <td>
                  <button mat-flat-button color="accent">Mostrar</button>
                  </td>
                </tr>
              </table>
    
            </mat-card-content>
        </mat-card>
        </div>
        </form>
        <div *ngIf="dataSource?.length">
          <mat-card>
            <mat-card-header class="card-header">
              <mat-card-subtitle><h2>Detalles</h2></mat-card-subtitle>
            </mat-card-header>
            <hr>
            <mat-card-content class="card-content">
              <br>
              <table mat-table [dataSource]="dataSource" class="table">
                <ng-container matColumnDef="fecha">
                  <th mat-header-cell *matHeaderCellDef> Fecha </th>
                  <td mat-cell *matCellDef="let viaje"> {{ viaje.fecha | date: 'shortDate'}} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <ng-container matColumnDef="nombreColaborador">
                  <th mat-header-cell *matHeaderCellDef> Colaborador </th>
                  <td mat-cell *matCellDef="let viaje"> {{ viaje.nombreColaborador }} </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
              
                <ng-container matColumnDef="distancia">
                  <th mat-header-cell *matHeaderCellDef> Distancia </th>
                  <td mat-cell *matCellDef="let viaje"> {{ viaje.distancia }} </td>
                  <td mat-footer-cell *matFooterCellDef> Total </td>
                </ng-container>
                <ng-container matColumnDef="tarifa">
                  <th mat-header-cell *matHeaderCellDef> Tarifa </th>
                  <td mat-cell *matCellDef="let viaje"> {{ viaje.tarifa }} </td>
                  <td mat-footer-cell *matFooterCellDef> {{getTotal() | currency}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let viaje; columns: displayedColumns;"></tr>
                <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
              </table>
            </mat-card-content>
        </mat-card>
        </div>

        
    </mat-card-content>
</mat-card>



</div>



